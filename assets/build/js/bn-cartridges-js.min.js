!function(){loadRWDimg=function(a){$("["+a+"]").each(function(b,c){var d=$(this).attr(a);$(this).attr({src:d,alt:"",border:0})})},$(function(){var a=$(window).width();a>1279?loadRWDimg("data-img-src-desktop"):a<600?loadRWDimg("data-img-src-mobile"):loadRWDimg("data-img-src-tablet");var b=!1,c=window.location.pathname.split("/");if("mobile"!==c[1].toLowerCase()&&"m.barnesandnoble.com"!==window.location.hostname&&"mbarnesandnoble.skavaone.com"!==window.location.hostname||(b=!0),b){var d=function(a){var b=$(a.selector),c=$(b).length,d=c>0&&"carousel"===$(b).first().attr("data-widget-type"),e=1;!d&&c>0&&$(b).each(function(){var b=this,c=$(this).attr("id"),d=$(this).children("li:not(.add-plus-product)").length;getCarouselWidth(this,a);$(this).attr("data-widget-type","carousel"),a.incrementIds&&($(this).attr("id",c+"-"+e),e++),d>a.numDisplay&&($(this).after(a.paginationButtons),a.breadcrumbContainer&&a.pagination&&$(this).after(a.breadcrumbContainer)),$(this).parent().off("click").on("click",".prev-item, .featured-prev-item",function(){$(b).trigger("prev")}),$(this).parent().on("click",".next-item, .featured-next-item",function(){$(b).trigger("next")}),$(this).carouFredSel({align:a.alignItems,responsive:a.responsive,circular:a.circular,height:a.carouselHeight,items:{visible:a.items.visible,width:a.itemWidth,height:a.itemHeight},prev:a.prev,next:a.next,pagination:a.pagination,auto:a.auto,scroll:a.scroll,direction:a.direction}),$(this).swiperight(function(){$(this).trigger("prev")}),$(this).swipeleft(function(){$(this).trigger("next")})})},e=$.extend({},this.carouFredSelect_cfg_base,{selector:".event-info",alignItems:"left",carouselWidth:"100%",carouselHeight:"variable",items:{height:"auto",width:"auto",visible:{min:1.12}},prevButtonID:"carousel-prev",nextButtonID:"carousel-next",prev:".featured-prev-item",next:".featured-next-item",paginationButtons:'<div id="carousel-pagination" class="featured-item-pagination"></div><div class="featured-prev-item" style="display:block;" id="carousel-prev"><span style="display:none;">Prev</span></div><div class="featured-next-item" id="carousel-next"><span style="display:none;">Next</span></div>',breadcrumbContainer:'<div id="carousel-pagination" class="featured-item-pagination"></div>',pagination:{container:"#carousel-pagination",anchorBuilder:function(a){return' <span data-icon="carousel-pager-off">'+a+"</span>"}},responsive:!0,auto:{play:!1},circular:!0,redrawOnResize:!1});d(e),$("#ec-carouselEventsVideo").carouFredSel({auto:{play:!0,timeoutDuration:3e3},scroll:{items:1}}),$("a.mf-cta").off()}else{var f=null,g=null;$(".card a, .event-info-pod").each(function(a){eventExpiration=$(this).data("expiration"),eventEnd=new Date(eventExpiration),eventEnd.setDate(eventEnd.getDate()+1),today=new Date,today>eventEnd&&($(this).addClass("ended"),$(".ended .card-date, .ended .event-info-pod-date").text("This Event Has Passed"),$(".ended .card-title").remove())}),$(".card a").each(function(){return $(this).hasClass("ended")?(g="#info-spot1",void $(".card #info-spot1").addClass("current")):($(this).addClass("current"),withMe=this.id,g="#info-"+withMe,startSplit=withMe.split("t"),f=startSplit[1]-1,!1)});var h=$(".calendar-bottom-content").length;if(h<4&&$(".ec-backward, .ec-forward").remove(),$("#ec-carouselEvents").length&&$("#ec-carouselEvents").carouFredSel({circular:!1,infinite:!1,direction:"left",items:{visible:3,start:f},auto:!1,next:{button:".ec-forward"},prev:{button:".ec-backward"}}),$("div[id^=info-spot]").length,$("div[id^=info-spot]").hide(),$(g).show(),$(".card a").click(function(){var a="#info-"+$(this).attr("id");return $("div[id^=info-spot]").hide(),$(a).show(),$(".card a").removeClass("current"),$(this).addClass("current"),!1}),$(".event-info-pod").length){var i=-1;$(".event-info-pod").each(function(){i=i>$(this).height()?i:$(this).height()}),$(".event-info-pod").each(function(){$(this).height(i)})}$(".lt-ie9").length&&loadRWDimg("data-img-src-lt-ie9")}if($("form#cqTextBookSearch").length){var j=$("form#cqTextBookSearch");j.submit(function(){txtBookQuickSearch()}),txtBookQuickSearch=function(){var a=$.trim($("#searchTextBookBar").val()).replace(/[\W]/g,"+"),b=location.protocol+"//"+location.hostname+"/s/"+a+"/_/N-8q9";j.attr("action",b),j.attr("method","get")},$(".cqTextBookSearch-isbn-sample"),$(".cqTextBookSearch-isbn-link").on("click",function(a){a.preventDefault();var b=($(".cqTextBookSearch-isbn-link"),$(".cqTextBookSearch-isbn-sample").is(":visible"),$(this));return b.hasClass("active")?(b.removeClass("active"),$("#searchTextBookBar").focus()):b.addClass("active"),!1})}$("#jsonGridItems").length&&"undefined"!=typeof jsonGridItems&&$.each(jsonGridItems,function(a){var b=a+1;if(b>0){var c=this.ean,d=this.title.trim(),e=this.contributor.trim(),f=50,g=d;if(d.length>f){var h="&hellip;",i=d.substr(0,f);i=i.substr(0,Math.min(i.length,i.lastIndexOf(" "))),g=i+h}var j="event_result-grid_"+c+"_image",k="http://prodimage.images-bn.com/pimages/"+c+"_p0_v3_s118x184.jpg",l=$('<div class="jsonGridItem"><a href="http://stores.barnesandnoble.com/" onclick="set_cookie('+j+');"><div class="jsonGridImage"><img src="'+k+'" border="0" alt="" /></div><div class="jsonGridDetails"><p class="jsonGridTitle">'+g+'</p><p class="jsonGridContributor">by '+e+"</p></div></a></div>");$("#jsonGridItems").append(l)}}),($("#compare").length||$(".comp-price").length||$("#nook-device-price").length)&&$.ajax({url:"//"+window.location.host+"/web-services/nook-devices?format=json",type:"GET",dataType:"text"}).done(function(a){var b=$.parseJSON(a);$.each(b.mainContent[0].records,function(a){if(a<20){var b=this.attributes["common.id"],c=this.attributes.P_List_Price;c="$"+Math.round(100*c)/100;var d=this.attributes.P_Sale_Price;d="$"+Math.round(100*d)/100;this.attributes.P_Percentage_Save;$("[data-bnprice='"+b+"']").each(function(){$(this).parent().hasClass("comp-price")?(d<c?($(this).html("<s>"+c+"</s>"),$(this).next().html(d)):$(this).html(d),$(this).attr("data-endeca-price","true")):$(this).html(d)})}})}).fail(function(a,b,c){}).success(function(a,b){}).complete(function(a,b){})})}(),function(){loadRWDimg=function(a){$("["+a+"]").each(function(b,c){var d=$(this).attr(a);$(this).attr({src:d,alt:"",border:0})})},$(function(){var a=$(window).width();a>1279?loadRWDimg("data-img-src-desktop"):a<600?loadRWDimg("data-img-src-mobile"):loadRWDimg("data-img-src-tablet");var b=!1,c=window.location.pathname.split("/");if("mobile"!==c[1].toLowerCase()&&"m.barnesandnoble.com"!==window.location.hostname&&"mbarnesandnoble.skavaone.com"!==window.location.hostname||(b=!0),b){var d=function(a){var b=$(a.selector),c=$(b).length,d=c>0&&"carousel"===$(b).first().attr("data-widget-type"),e=1;!d&&c>0&&$(b).each(function(){var b=this,c=$(this).attr("id"),d=$(this).children("li:not(.add-plus-product)").length;getCarouselWidth(this,a);$(this).attr("data-widget-type","carousel"),a.incrementIds&&($(this).attr("id",c+"-"+e),e++),d>a.numDisplay&&($(this).after(a.paginationButtons),a.breadcrumbContainer&&a.pagination&&$(this).after(a.breadcrumbContainer)),$(this).parent().off("click").on("click",".prev-item, .featured-prev-item",function(){$(b).trigger("prev")}),$(this).parent().on("click",".next-item, .featured-next-item",function(){$(b).trigger("next")}),$(this).carouFredSel({align:a.alignItems,responsive:a.responsive,circular:a.circular,height:a.carouselHeight,items:{visible:a.items.visible,width:a.itemWidth,height:a.itemHeight},prev:a.prev,next:a.next,pagination:a.pagination,auto:a.auto,scroll:a.scroll,direction:a.direction}),$(this).swiperight(function(){$(this).trigger("prev")}),$(this).swipeleft(function(){$(this).trigger("next")})})},e=$.extend({},this.carouFredSelect_cfg_base,{selector:".event-info",alignItems:"left",carouselWidth:"100%",carouselHeight:"variable",items:{height:"auto",width:"auto",visible:{min:1.12}},prevButtonID:"carousel-prev",nextButtonID:"carousel-next",prev:".featured-prev-item",next:".featured-next-item",paginationButtons:'<div id="carousel-pagination" class="featured-item-pagination"></div><div class="featured-prev-item" style="display:block;" id="carousel-prev"><span style="display:none;">Prev</span></div><div class="featured-next-item" id="carousel-next"><span style="display:none;">Next</span></div>',breadcrumbContainer:'<div id="carousel-pagination" class="featured-item-pagination"></div>',pagination:{container:"#carousel-pagination",anchorBuilder:function(a){return' <span data-icon="carousel-pager-off">'+a+"</span>"}},responsive:!0,auto:{play:!1},circular:!0,redrawOnResize:!1});d(e),$("#ec-carouselEventsVideo").carouFredSel({auto:{play:!0,timeoutDuration:3e3},scroll:{items:1}}),$("a.mf-cta").off()}else{var f=null,g=null;$(".card a, .event-info-pod").each(function(a){eventExpiration=$(this).data("expiration"),eventEnd=new Date(eventExpiration),eventEnd.setDate(eventEnd.getDate()+1),today=new Date,today>eventEnd&&($(this).addClass("ended"),$(".ended .card-date, .ended .event-info-pod-date").text("This Event Has Passed"),$(".ended .card-title").remove())}),$(".card a").each(function(){return $(this).hasClass("ended")?(g="#info-spot1",void $(".card #info-spot1").addClass("current")):($(this).addClass("current"),withMe=this.id,g="#info-"+withMe,startSplit=withMe.split("t"),f=startSplit[1]-1,!1)});var h=$(".calendar-bottom-content").length;if(h<4&&$(".ec-backward, .ec-forward").remove(),$("#ec-carouselEvents").length&&$("#ec-carouselEvents").carouFredSel({circular:!1,infinite:!1,direction:"left",items:{visible:3,start:f},auto:!1,next:{button:".ec-forward"},prev:{button:".ec-backward"}}),$("div[id^=info-spot]").length,$("div[id^=info-spot]").hide(),$(g).show(),$(".card a").click(function(){var a="#info-"+$(this).attr("id");return $("div[id^=info-spot]").hide(),$(a).show(),$(".card a").removeClass("current"),$(this).addClass("current"),!1}),$(".event-info-pod").length){var i=-1;$(".event-info-pod").each(function(){i=i>$(this).height()?i:$(this).height()}),$(".event-info-pod").each(function(){$(this).height(i)})}$(".lt-ie9").length&&loadRWDimg("data-img-src-lt-ie9")}if($("form#r17TextBookSearch").length){var j=$("form#r17TextBookSearch");j.submit(function(){txtBookQuickSearch()}),txtBookQuickSearch=function(){var a=$.trim($("#siteSearch").val()).replace(/[\W]/g,"+"),b=location.protocol+"//"+location.hostname+"/s/"+a+"/_/N-8q9";j.attr("action",b),j.attr("method","get")}}if($("form#cqTextBookSearch").length){var k=$("form#cqTextBookSearch");k.submit(function(){txtBookQuickSearch()}),txtBookQuickSearch=function(){var a=$.trim($("#searchTextBookBar").val()).replace(/[\W]/g,"+"),b=location.protocol+"//"+location.hostname+"/s/"+a+"/_/N-8q9";k.attr("action",b),k.attr("method","get")},$(".cqTextBookSearch-isbn-sample"),$(".cqTextBookSearch-isbn-link").on("click",function(a){a.preventDefault();var b=($(".cqTextBookSearch-isbn-link"),$(".cqTextBookSearch-isbn-sample").is(":visible"),$(this));return b.hasClass("active")?(b.removeClass("active"),$("#searchTextBookBar").focus()):b.addClass("active"),!1})}$("#jsonGridItems").length&&"undefined"!=typeof jsonGridItems&&$.each(jsonGridItems,function(a){var b=a+1;if(b>0){var c=this.ean,d=this.title.trim(),e=this.contributor.trim(),f=50,g=d;if(d.length>f){var h="&hellip;",i=d.substr(0,f);i=i.substr(0,Math.min(i.length,i.lastIndexOf(" "))),g=i+h}var j="event_result-grid_"+c+"_image",k="//prodimage.images-bn.com/pimages/"+c+"_p0_v3_s118x184.jpg",l=$('<div class="jsonGridItem"><a href="http://stores.barnesandnoble.com/" onclick="set_cookie('+j+');"><div class="jsonGridImage"><img src="'+k+'" border="0" alt="" /></div><div class="jsonGridDetails"><p class="jsonGridTitle">'+g+'</p><p class="jsonGridContributor">by '+e+"</p></div></a></div>");$("#jsonGridItems").append(l)}}),($("#compare").length||$(".comp-price").length||$("#nook-device-price").length)&&$.ajax({url:"//"+window.location.host+"/web-services/nook-devices?format=json",type:"GET",dataType:"text"}).done(function(a){var b=$.parseJSON(a);$.each(b.mainContent[0].records,function(a){if(a<20){var b=this.attributes["common.id"],c=this.attributes.P_List_Price;c="$"+Math.round(100*c)/100;var d=this.attributes.P_Sale_Price;d="$"+Math.round(100*d)/100;this.attributes.P_Percentage_Save;$("[data-bnprice='"+b+"']").each(function(){$(this).parent().hasClass("comp-price")?(d<c?($(this).html("<s>"+c+"</s>"),$(this).next().html(d)):$(this).html(d),$(this).attr("data-endeca-price","true")):$(this).html(d)})}})}).fail(function(a,b,c){}).success(function(a,b){}).complete(function(a,b){})})}();